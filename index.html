// See https://aka.ms/new-console-template for more information
Console.WriteLine("Welcome to the Dream Gate...");
Console.WriteLine("What is your name, traveler?");
string playerName = Console.ReadLine();
Console.WriteLine("Greetings, " + playerName + ".");

int health = 100;
Console.WriteLine("Your health is: " + health);

Console.WriteLine("You stand before two doors...");
Console.WriteLine("1 - Enter the blue door");
Console.WriteLine("2 - Enter the dark door");
Console.WriteLine("Which door do you choose?");
string choice = Console.ReadLine();

if (choice == "1")
{
    Console.WriteLine("You step into a glowing blue realm of calm energy...");

    int heal = 10;
    health = health + heal;
    Console.WriteLine("The blue light heals you for " + heal + " points.");
    Console.WriteLine("Your health is now: " + health);
}
else
{
    Console.WriteLine("The darkness whispers as the door closes behind you...");

    int damage = 20;
    health = health - damage;

    Console.WriteLine("Something claws at you in the dark. You lose " + damage + " health.");
    Console.WriteLine("Your health is now: " + health);
}

Console.WriteLine();
Console.WriteLine("A shadowy creature appears in front of you!");

string enemyName = "Shadow Beast";
int enemyHealth = 50;
int enemyDamage = 30;

Random rng = new Random(); // makes random numbers for heavy attack

Console.WriteLine("Enemy: " + enemyName);
Console.WriteLine("Enemy health: " + enemyHealth);
Console.WriteLine();

// ---------- BATTLE LOOP ----------
while (enemyHealth > 0 && health > 0)
{
    Console.WriteLine("Do you want to (L)ight attack, (H)eavy attack, or (R)un?");
    string action = Console.ReadLine();

    if (action == "L" || action == "l")
    {
        // LIGHT ATTACK: smaller damage, always hits
        int playerDamage = 15;

        Console.WriteLine("You use a light attack on the " + enemyName + "!");
        Console.WriteLine("You deal " + playerDamage + " damage.");

        enemyHealth -= playerDamage;
        Console.WriteLine("The enemy's health is now: " + enemyHealth);
        Console.WriteLine();

        if (enemyHealth <= 0)
        {
            break; // enemy died, leave the loop
        }

        // Enemy strikes back (normal damage)
        Console.WriteLine("The " + enemyName + " strikes back!");
        Console.WriteLine("You take " + enemyDamage + " damage.");
        health -= enemyDamage;
        Console.WriteLine("Your health is now: " + health);
        Console.WriteLine();
    }
    else if (action == "H" || action == "h")
    {
        // HEAVY ATTACK: strong but might miss
        int hitChance = rng.Next(0, 100); // random number 0â€“99

        if (hitChance < 70)
        {
            // 70% chance to hit
            int playerDamage = 30;
            Console.WriteLine("You charge up a HEAVY attack!");
            Console.WriteLine("You smash into the " + enemyName + " for " + playerDamage + " damage!");
            enemyHealth -= playerDamage;
            Console.WriteLine("The enemy's health is now: " + enemyHealth);
        }
        else
        {
            // 30% chance to miss
            Console.WriteLine("You swing a HEAVY attack... but you MISS!");
        }

        Console.WriteLine();

        if (enemyHealth <= 0)
        {
            break; // enemy died, leave the loop
        }

        // Enemy hits harder after a heavy attempt
        int heavyEnemyDamage = enemyDamage + 10;
        Console.WriteLine("The " + enemyName + " counters your heavy move!");
        Console.WriteLine("You take " + heavyEnemyDamage + " damage.");
        health -= heavyEnemyDamage;
        Console.WriteLine("Your health is now: " + health);
        Console.WriteLine();
    }
    else if (action == "R" || action == "r")
    {
        Console.WriteLine("You turn and run back through the Dream Gate...");
        Console.WriteLine("The shadows laugh as you escape.");
        Console.WriteLine("GAME OVER (Coward's Ending)");
        return; // end the program
    }
    else
    {
        Console.WriteLine("Please type L for light attack, H for heavy attack, or R to run.");
        Console.WriteLine();
    }
}

// ---------- AFTER THE LOOP ----------
if (health <= 0)
{
    Console.WriteLine();
    Console.WriteLine("Your strength fails you...");
    Console.WriteLine("You collapse at the Dream Gate.");
    Console.WriteLine("GAME OVER");
}
else if (enemyHealth <= 0)
{
    Console.WriteLine();
    Console.WriteLine("You have defeated the " + enemyName + "!");

    int potionHeal = 15;
    Console.WriteLine("You find a small glowing potion on the ground.");
    Console.WriteLine("You drink it and restore " + potionHeal + " health.");
    health += potionHeal;
    Console.WriteLine("Your health is now: " + health);
    Console.WriteLine();
    Console.WriteLine("You survive this encounter... for now.");
}

